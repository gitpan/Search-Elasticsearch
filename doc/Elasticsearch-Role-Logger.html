<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<link rel='stylesheet' href='https://metacpan.org/_asset/288683e3285b02987a848283f0f92207' type='text/css'>
<script type='text/javascript' src='https://metacpan.org/_asset/12b19d083bf773523c065d4d729f0327'></script>
</head>
<body>
<div class="pod">


<ul id="index">
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#CONFIGURATION">CONFIGURATION</a>
    <ul>
      <li><a href="#log_to"><code>log_to</code></a></li>
      <li><a href="#log_as"><code>log_as</code></a></li>
      <li><a href="#trace_to"><code>trace_to</code></a></li>
      <li><a href="#trace_as"><code>trace_as</code></a></li>
    </ul>
  </li>
  <li><a href="#METHODS">METHODS</a>
    <ul>
      <li><a href="#log_handle-"><code>log_handle()</code></a></li>
      <li><a href="#trace_handle-"><code>trace_handle()</code></a></li>
      <li><a href="#trace_request-"><code>trace_request()</code></a></li>
      <li><a href="#trace_response-"><code>trace_response()</code></a></li>
      <li><a href="#trace_error-"><code>trace_error()</code></a></li>
      <li><a href="#trace_comment-"><code>trace_comment()</code></a></li>
    </ul>
  </li>
</ul>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>This role provides common functionality to Logger implementations, to enable the logging of events and the tracing of request-response conversations with Elasticsearch nodes.</p>

<p>See <a href="./Elasticsearch::Logger::LogAny">Elasticsearch::Logger::LogAny</a> for the default implementation.</p>

<h1 id="CONFIGURATION">CONFIGURATION</h1>

<h2 id="log_to"><code>log_to</code></h2>

<p>Parameters passed to <code>log_to</code> are used by <a href="./Elasticsearch::Role::Logger">Elasticsearch::Role::Logger</a> implementations to setup the <a href="#log_handle-">&quot;log_handle()&quot;</a>. See <a href="./Elasticsearch::Logger::LogAny#log_to">&quot;log_to&quot; in Elasticsearch::Logger::LogAny</a> for details.</p>

<h2 id="log_as"><code>log_as</code></h2>

<p>By default, events emitted by <a href="#debug-">&quot;debug()&quot;</a>, <a href="#info-">&quot;info()&quot;</a>, <a href="#warning-">&quot;warning()&quot;</a>, <a href="#error-">&quot;error()&quot;</a> and <a href="#critical-">&quot;critical()&quot;</a> are logged to the <a href="#log_handle-">&quot;log_handle()&quot;</a> under the category <code>&quot;elasticsearch.event&quot;</code>, which can be configured with <code>log_as</code>.</p>

<h2 id="trace_to"><code>trace_to</code></h2>

<p>Parameters passed to <code>trace_to</code> are used by <a href="./Elasticsearch::Role::Logger">Elasticsearch::Role::Logger</a> implementations to setup the <a href="#trace_handle-">&quot;trace_handle()&quot;</a>. See <a href="./Elasticsearch::Logger::LogAny#trace_to">&quot;trace_to&quot; in Elasticsearch::Logger::LogAny</a> for details.</p>

<h2 id="trace_as"><code>trace_as</code></h2>

<p>By default, trace output emitted by <a href="#trace_request-">&quot;trace_request()&quot;</a>, <a href="#trace_response-">&quot;trace_response()&quot;</a>, <a href="#trace_error-">&quot;trace_error()&quot;</a> and <a href="#trace_comment-">&quot;trace_comment()&quot;</a> are logged under the category <code>elasticsearch.trace</code>, which can be configured with <code>trace_as</code>.</p>

<h1 id="METHODS">METHODS</h1>

<h2 id="log_handle-"><code>log_handle()</code></h2>

<p>Returns an object which can handle the methods: <code>debug()</code>, <code>debugf()</code>, <code>is_debug()</code>, <code>info()</code>, <code>infof()</code>, <code>is_info()</code>, <code>warning()</code>, <code>warningf()</code>, <code>is_warning()</code>, <code>error()</code>, <code>errorf()</code>, <code>is_error()</code>, <code>critical()</code>, <code>criticalf()</code> and <code>is_critical()</code>.</p>

<h2 id="trace_handle-"><code>trace_handle()</code></h2>

<p>Returns an object which can handle the methods: <code>trace()</code>, <code>tracef()</code> and <code>is_trace()</code>.</p>

<h2 id="trace_request-"><code>trace_request()</code></h2>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    $logger-&gt;trace_request($cxn,\%request);</pre>

<p>Accepts a Cxn object and request parameters and logs them if tracing is enabled.</p>

<h2 id="trace_response-"><code>trace_response()</code></h2>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    $logger-&gt;trace_response($cxn,$code,$response,$took);</pre>

<p>Logs a successful HTTP response, where <code>$code</code> is the HTTP status code, <code>$response</code> is the HTTP body and <code>$took</code> is the time the request took in seconds</p>

<h2 id="trace_error-"><code>trace_error()</code></h2>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    $logger-&gt;trace_error($cxn,$error);</pre>

<p>Logs a failed HTTP response, where <code>$error</code> is an <a href="./Elasticsearch::Error">Elasticsearch::Error</a> object.</p>

<h2 id="trace_comment-"><code>trace_comment()</code></h2>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    $logger-&gt;trace_comment($comment);</pre>

<p>Used to insert debugging comments into trace output.</p>


</div>
</body>
</html>


