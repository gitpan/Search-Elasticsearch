<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<link rel='stylesheet' href='https://metacpan.org/_asset/288683e3285b02987a848283f0f92207' type='text/css'>
<script type='text/javascript' src='https://metacpan.org/_asset/12b19d083bf773523c065d4d729f0327'></script>
</head>
<body>
<div class="pod">


<ul id="index">
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#METHODS">METHODS</a>
    <ul>
      <li><a href="#perform_request-"><code>perform_request()</code></a></li>
    </ul>
  </li>
</ul>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>This role provides the single <code>parse_request()</code> method for classes which need to parse an API definition from <a href="./Elasticsearch::Role::API">Elasticsearch::Role::API</a> and convert it into a request which can be passed to <a href="./Elasticsearch::Transport#perform_request-">&quot;perform_request()&quot; in Elasticsearch::Transport</a>.</p>

<h1 id="METHODS">METHODS</h1>

<h2 id="perform_request-"><code>perform_request()</code></h2>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    $request = $client-&gt;parse_request(\%defn,\%params);</pre>

<p>The <code>%defn</code> is a definition returned by <a href="./Elasticsearch::Role::API#api-">&quot;api()&quot; in Elasticsearch::Role::API</a> with an extra key <code>name</code> which should be the name of the method that was called on the client. For instance if the user calls <code>$client-&gt;search</code>, then the <code>name</code> should be <code>&quot;search&quot;</code>.</p>

<p><code>parse_request()</code> will turn the parameters that have been passed in into a <code>path</code> (via <a href="./Elasticsearch::Util::API::Path#path_init-">&quot;path_init()&quot; in Elasticsearch::Util::API::Path</a>), a query-string hash (via <a href="./Elasticsearch::Util::API::QS#qs_init">&quot;qs_init&quot; in Elasticsearch::Util::API::QS</a>) and will through a <code>body</code> value directly.</p>

<p><b>NOTE:</b> If a <code>path</code> key is specified in the <code>%params</code> then it will be used directly, instead of trying to build path from the path template. Similarly, if a <code>params</code> key is specified in the <code>%params</code>, then it will be used as a basis for the query string hash. For instance:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    $client-&gt;perform_request(
        {
            method =&gt; &#39;GET&#39;,
            name   =&gt; &#39;new_method&#39;
        },
        {
            path   =&gt; &#39;/new/method&#39;,
            params =&gt; { foo =&gt; &#39;bar&#39; },
            body   =&gt; \%body
        }
    );</pre>

<p>This makes it easy to add support for custom plugins or new functionality not yet supported by the released client.</p>


</div>
</body>
</html>


