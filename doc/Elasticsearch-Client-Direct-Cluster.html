<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<link rel='stylesheet' href='https://metacpan.org/_asset/288683e3285b02987a848283f0f92207' type='text/css'>
<script type='text/javascript' src='https://metacpan.org/_asset/12b19d083bf773523c065d4d729f0327'></script>
</head>
<body>
<div class="pod">


<ul id="index">
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#METHODS">METHODS</a>
    <ul>
      <li><a href="#health-"><code>health()</code></a></li>
      <li><a href="#node_info-"><code>node_info()</code></a></li>
      <li><a href="#node_stats-"><code>node_stats()</code></a></li>
      <li><a href="#hot_threads-"><code>hot_threads()</code></a></li>
      <li><a href="#get_settings-"><code>get_settings()</code></a></li>
      <li><a href="#put_settings-"><code>put_settings()</code></a></li>
      <li><a href="#state-"><code>state()</code></a></li>
      <li><a href="#reroute-"><code>reroute()</code></a></li>
      <li><a href="#shutdown-"><code>shutdown()</code></a></li>
    </ul>
  </li>
</ul>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>This module provides methods to make cluster-level requests, such as getting and setting cluster-level settings, manually rerouting shards, and retrieving for monitoring purposes.</p>

<p>It does <a href="./Elasticsearch::Role::Client::Direct">Elasticsearch::Role::Client::Direct</a>.</p>

<h1 id="METHODS">METHODS</h1>

<h2 id="health-"><code>health()</code></h2>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    $response = $e-&gt;cluster-&gt;health( %qs_params )</pre>

<p>The <code>health()</code> method is used to retrieve information about the cluster health, returning <code>red</code>, <code>yellow</code> or <code>green</code> to indicate the state of the cluster, indices or shards.</p>

<p>Query string parameters: <code>level</code>, <code>local</code>, <code>master_timeout</code>, <code>timeout</code>, <code>wait_for_active_shards</code>, <code>wait_for_nodes</code>, <code>wait_for_relocating_shards</code>, <code>wait_for_status</code></p>

<p>See the <a href="http://www.elasticsearch.org/guide/reference/api/admin-cluster-health/">cluster health docs</a> for more information.</p>

<h2 id="node_info-"><code>node_info()</code></h2>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    $response = $e-&gt;cluster-&gt;node_info(
        node_id =&gt; $node_id | \@node_ids       # optional
    );</pre>

<p>The <code>node_info()</code> method returns static information about the nodes in the cluster, such as the configured maximum number of file handles, the maximum configured heap size or the threadpool settings.</p>

<p>Query string parameters: <code>all</code>, <code>clear</code>, <code>http</code>, <code>jvm</code>, <code>network</code>, <code>os</code>, <code>plugin</code>, <code>process</code>, <code>settings</code>, <code>thread_pool</code>, <code>timeout</code>, <code>transport</code></p>

<p>See the <a href="http://www.elasticsearch.org/guide/reference/api/admin-cluster-nodes-info/">node_info docs</a> for more information.</p>

<h2 id="node_stats-"><code>node_stats()</code></h2>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    $response = $e-&gt;cluster-&gt;node_stats(
        node_id =&gt; $node_id | \@node_ids       # optional
    );</pre>

<p>The <code>node_stats()</code> method returns statistics about the nodes in the cluster, such as the number of currently open file handles, the current heap memory usage or the current number of threads in use.</p>

<p>Stats can be returned for all nodes, or limited to particular nodes with the <code>node_id</code> parameter. The <a href="./Elasticsearch::Client::Direct::Indices#indices_stats-">indices_stats</a> information can also be retrieved on a per-node basis with the <code>node_stats()</code> method:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    $response = $e-&gt;cluster-&gt;node_stats(
        node_id =&gt; &#39;node_1&#39;,
        indices =&gt; 1,
        metric  =&gt; &#39;docs&#39;
    );</pre>

<p>Query string parameters: <code>all</code>, <code>clear</code>, <code>fields</code>, <code>fs</code>, <code>http</code>, <code>indices</code>, <code>jvm</code>, <code>network</code>, <code>os</code>, <code>process</code>, <code>thread_pool</code>, <code>transport</code></p>

<p>See the <a href="http://www.elasticsearch.org/guide/reference/api/admin-cluster-nodes-stats/">node_stats docs</a> for more information.</p>

<h2 id="hot_threads-"><code>hot_threads()</code></h2>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    $response = $e-&gt;cluster-&gt;hot_threads(
        node_id =&gt; $node_id | \@node_ids       # optional
    )</pre>

<p>The <code>hot_threads()</code> method is a useful tool for diagnosing busy nodes. It takes a snapshot of which threads are consuming the most CPU.</p>

<p>Query string parameters: <code>interval</code>, <code>snapshots</code>, <code>threads</code>, <code>type</code></p>

<p>See the <a href="http://www.elasticsearch.org/guide/reference/api/admin-cluster-nodes-hot-threads/">hot_threads docs</a> for more information.</p>

<h2 id="get_settings-"><code>get_settings()</code></h2>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    $response = $e-&gt;cluster-&gt;get_settings()</pre>

<p>The <code>get_settings()</code> method is used to retrieve cluster-wide settings that have been set with the <a href="#put_settings-">&quot;put_settings()&quot;</a> method.</p>

<p>See the <a href="http://www.elasticsearch.org/guide/reference/api/admin-cluster-update-settings/">cluster settings docs</a> for more information.</p>

<h2 id="put_settings-"><code>put_settings()</code></h2>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    $response = $e-&gt;cluster-&gt;put_settings( %settings );</pre>

<p>The <code>put_settings()</code> method is used to set cluster-wide settings, either transiently (which don&#39;t survive restarts) or permanently (which do survive restarts).</p>

<p>For instance:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    $response = $e-&gt;cluster-&gt;put_settings(
        body =&gt; {
            transient =&gt; { &quot;discovery.zen.minimum_master_nodes&quot; =&gt; 5 }
        }
    );</pre>

<p>See the <a href="http://www.elasticsearch.org/guide/reference/api/admin-cluster-update-settings/">cluster settings docs</a> for more information.</p>

<h2 id="state-"><code>state()</code></h2>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    $response = $e-&gt;cluster-&gt;state();</pre>

<p>The <code>state()</code> method returns the current cluster state from the master node, or from the responding node if <code>local</code> is set to <code>true</code>.</p>

<p>Query string parameters: <code>filter_blocks</code>, <code>filter_index_templates</code>, <code>filter_indices</code>, <code>filter_metadata</code>, <code>filter_nodes</code>, <code>filter_routing_table</code>, <code>local</code>, <code>master_timeout</code></p>

<p>See the <a href="http://www.elasticsearch.org/guide/reference/api/admin-cluster-state/">cluster state docs</a> for more information.</p>

<h2 id="reroute-"><code>reroute()</code></h2>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    $e-&gt;cluster-&gt;reroute(
        body =&gt; { commands }    # required
    );</pre>

<p>The <code>reroute()</code> method is used to manually reallocate shards from one node to another. The <code>body</code> should contain the <code>commands</code> indicating which changes should be made. For instance:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    $e-&gt;cluster-&gt;reroute(
        body =&gt; {
            commands =&gt; [
                { move =&gt; {
                    index     =&gt; &#39;test&#39;,
                    shard     =&gt; 0,
                    from_node =&gt; &#39;node_1&#39;,
                    to_node   =&gt; &#39;node_2
                }},
                { allocate =&gt; {
                    index     =&gt; &#39;test&#39;,
                    shard     =&gt; 1,
                    node      =&gt; &#39;node_3&#39;
                }}
            ]
        }
    );</pre>

<p>Query string parameters: <code>dry_run</code>, <code>filter_metadata</code></p>

<p>See the <a href="http://www.elasticsearch.org/guide/reference/api/admin-cluster-reroute/">reroute docs</a> for more information.</p>

<h2 id="shutdown-"><code>shutdown()</code></h2>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    $e-&gt;cluster-&gt;shutdown(
        node_id =&gt; $node_id | \@node_ids    # optional
    );</pre>

<p>The <code>shutdown()</code> method is used to shutdown one or more nodes, or the whole cluster.</p>

<p>Query string parameters: <code>delay</code>, <code>exit</code></p>

<p>See the <a href="http://www.elasticsearch.org/guide/reference/api/admin-cluster-nodes-shutdown/">shutdown docs</a> for more information.</p>


</div>
</body>
</html>


